pipeline {
        agent any
        stages {
		    stage('Clone git'} {
			    steps {
				checkout([$class: 'GitSCM', branches: [[name: '*/dev']], extensions: [], userRemoteConfigs: [[credentialsId: 'f939d5f9-32c9-4e08-ab51-98ec36b9f2fe', url: 'https://git.epam.com/Anastasiya_Silivonchyk/dqe_mentoring.git']]])
				}
			}	
            stage('Build') {
                steps {
                    echo 'Hello World ...'
                    sh 'python3 python-file.py'
                }
            }
	        stage('Tests') {
		        steps {
		            echo 'Execute tests from pytest ...'
		            sh 'pytest pytest/TestCases/test_ex.py'
                }
            }
            stage('Deploy') {
                steps {
                    echo 'Merge dev branch with master ...'
                    sh 'git config --global user.email "Anastasiya_Silivonchyk@epam.com"'
                    sh 'git config --global user.name "AnastasiyaSilivonchyk"'
		            sh 'git stash'
                    sh 'git checkout main'
                    sh 'git merge dev'
					sh 'git push --set-upstream origin main'
                }
            }				
        }

